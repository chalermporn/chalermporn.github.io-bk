var config={trace:!0,spiralResolution:1,spiralLimit:1800,lineHeight:.8,xWordPadding:0,yWordPadding:3,font:"sans-serif"},words=["words","are","cool","and","so","are","you","inconstituent","funhouse!","apart","from","Steve","fish"].map(function(t){return{word:t,freq:Math.floor(50*Math.random())+10}});words.sort(function(t,o){return-1*(t.freq-o.freq)});var cloud=document.getElementById("word-cloud");cloud.style.position="relative",cloud.style.fontFamily=config.font;var traceCanvas=document.createElement("canvas");traceCanvas.width=cloud.offsetWidth,traceCanvas.height=cloud.offsetHeight;var traceCanvasCtx=traceCanvas.getContext("2d");cloud.appendChild(traceCanvas);var startPoint={x:cloud.offsetWidth/2,y:cloud.offsetHeight/2},wordsDown=[];function createWordObject(t,o){var n=document.createElement("div");return n.style.position="absolute",n.style.fontSize=o+"px",n.style.lineHeight=config.lineHeight,n.appendChild(document.createTextNode(t)),n}function placeWord(t,o,n){cloud.appendChild(t),t.style.left=o-t.offsetWidth/2+"px",t.style.top=n-t.offsetHeight/2+"px",wordsDown.push(t.getBoundingClientRect())}function trace(t,o){traceCanvasCtx.fillRect(t,o,1,1)}function spiral(t,o){return angle=config.spiralResolution*t,x=(1+angle)*Math.cos(angle),y=(1+angle)*Math.sin(angle),o?o():null}function intersect(t,o,n){cloud.appendChild(t),t.style.left=o-t.offsetWidth/2+"px",t.style.top=n-t.offsetHeight/2+"px";var e=t.getBoundingClientRect();cloud.removeChild(t);for(var i=0;i<wordsDown.length;i+=1){var r=wordsDown[i];if(!(e.right+config.xWordPadding<r.left-config.xWordPadding||e.left-config.xWordPadding>r.right+config.wXordPadding||e.bottom+config.yWordPadding<r.top-config.yWordPadding||e.top-config.yWordPadding>r.bottom+config.yWordPadding))return!0}return!1}!function(){for(var t=0;t<words.length;t+=1)for(var o=createWordObject(words[t].word,words[t].freq),n=0;n<config.spiralLimit&&!spiral(n,function(){if(!intersect(o,startPoint.x+x,startPoint.y+y))return placeWord(o,startPoint.x+x,startPoint.y+y),!0});n++);}(),function(){var o;traceCanvasCtx.beginPath(),config.trace&&(o=1,function t(){spiral(o,function(){trace(startPoint.x+x,startPoint.y+y)}),(o+=1)<config.spiralLimit&&window.requestAnimationFrame(t)}())}();